---
- name: Comprehensive Ansible Test Suite
  hosts: localhost
  connection: local
  become: false
  gather_facts: true
  vars_files:
    - ../vars/test_config.yml
  vars:
    test_dir: "{{ test_base_dir }}"
    test_summary: {}

  pre_tasks:
    - name: Create test base directory
      file:
        path: "{{ test_base_dir }}"
        state: directory
        mode: '0755'

    - name: Display test information
      debug:
        msg: "Running comprehensive test suite in {{ test_base_dir }}"

- name: Import dotfiles test
  import_playbook: test_dotfiles.yml
  tags: [dotfiles, test]

- name: Import installation test
  import_playbook: test_install.yml
  tags: [install, test]

- name: Import shell commands test
  import_playbook: test_shell_commands.yml
  tags: [shell, test]

- name: Import role integration test
  import_playbook: test_role_integration.yml
  tags: [integration, test]
