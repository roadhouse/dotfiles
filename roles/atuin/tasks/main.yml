---
- name: Link atuin config directory
  include_tasks: ../../common/tasks/includes/link_dotfiles.yml
  vars:
    config_dir: true
    role_name: atuin

- name:  Download atuin installer
  get_url:
    url: https://setup.atuin.sh
    dest: /tmp/atuin-installer.sh
    mode: '0755'
  register: atuin_download
  tags: atuin

- name:  Install atuin shell history
  command: /usr/bin/sh -s -- -y
  args:
    stdin: "{{ lookup('file', '/tmp/atuin-installer.sh') }}"
    creates: /usr/local/bin/atuin
  tags: atuin
